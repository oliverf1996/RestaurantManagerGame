<!DOCTYPE=html>
<html>

<head>
	<link rel="stylesheet" type="text/css" href="democss.css">
	<title>Restaurant Manager Game</title>

</head>
<body>
	<!--
	<button id="on" type="button" value="turn on">turn on</button>
    <button id="off" type="button" value="turn off">turn off</button>-->
	<img src="demoBackground.jpg" id="bg" >
	<canvas id="myCanvas" width="500" height="500"></canvas>
    <script>
	
	var x=20;
	var y=0;
	var c=document.getElementById("myCanvas");
	var ctx=c.getContext("2d");
	ctx.fillStyle="#FF0000";
	ctx.fillRect(x,y,150,75);
	ctx.clearRect(x,y, 200, 200);
	var intervalId;
	var customer = new Image();
	customer.src = "redcircle.png";
	var table = new Image();
	table.src= "KEY_Table_sprite.png";
	
	
	function newCustomer()
	{
		ctx.drawImage(customer, x, y, 50, 50);
		var t=setTimeout(function(){move1()}, 1500);
		
	}
	move1();
	
	function move1()
	{
		intervalId=setInterval(moveSide, 10);
		function moveSide()
		{
			x+=1;
			ctx.clearRect(0,0, c.width, c.height);
			ctx.drawImage(customer, x, y, 50, 50);
			ctx.drawImage(table, 200 ,200, 100, 50);
			if(x==150)
			{
				clearInterval(intervalId);
				move2();
			}
		}
	}
	
	function move2()
	{
		intervalId=setInterval(moveDown,10);
		
		function moveDown()
		{
			y+=1;
			ctx.clearRect(0,0, c.width, c.height);
			ctx.drawImage(customer, x, y, 50, 50);
			ctx.drawImage(table, 200 ,200, 100, 50);
			if(y==200)
			{
				clearInterval(intervalId);
				var t=setTimeout(function(){reset()}, 1000);
			}
		}
	}
	
	function reset()
	{
		x=20;
		y=0;
		ctx.clearRect(0,0, c.width, c.height);
		ctx.drawImage(table, 200 ,200, 100, 50);
		var rand= Math.floor(Math.random()*3+1);
		var t= setTimeout(function(){newCustomer()}, rand*1000);
	}
	
	/*
	on.onclick= function()
	{
		intervalId=setInterval(loop, 100);
	};
	off.onclick=function(){
		clearInterval(intervalId);
	};*/
	
	
    </script>
	
	
</body>
</html>

